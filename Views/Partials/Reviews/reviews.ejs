<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../../Partials/Reviews/reviews.styling.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
        
    </head>
    <body>
        <%- include("../Navbar/navbar.ejs") %>
        <div id="title">Reviews:</div>
        <div id="reviews-list"></div>
        <%- include("../Footer/footer.ejs") %>
        <script>
            $(document).ready(function() {
                const reviews_list = $("#reviews-list");
                $.ajax({
                    url: "/get-reviews", 
                    method: "GET",
                    dataType: "json",
                    success: function(reviews) {
                        $.each(reviews, function(index, review) {
                            if(review.recommendation_type == "positive"){
                                const reviews_element = $("<a>").html(  
                                    `<div id="review"> <h3> Rating: <span id="positive">positive</span> </h3>
                                    <h5 id="negative"> ${review.review_text} </h5> </div>`
                                );
                                reviews_list.append(reviews_element);
                            }
                            else if(review.recommendation_type == "negative"){
                                const reviews_element = $("<a>").html(  
                                    `<h3>Rating: <span id="negative">negative</span> </h3>
                                    <h5 id="positive">${review.review_text}</h5>`
                                );
                                reviews_list.append(reviews_element);
                            }
                        });
                    },
                    error: function(error) {
                        console.error("Error fetching reviews:", error);
                    }
        });
    });
</script>
</body>
</html>