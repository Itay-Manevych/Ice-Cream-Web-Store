<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../Navbar/navbar.styling.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    </head>

    <body class="body">
        <nav class="navbar bg-light align-items-center"> 
            <div class="us-box d-flex align-items-center">
                <img id="logo-btn" class="nav-item" src="../Assets/logo.png" alt="Logo">
                <button id="about-btn" class="nav-item">ABOUT US</button>
                <button id="shop-btn" class="nav-item">SHOP</button>
                <button id="sale-btn" class="nav-item">SALE</button>
            </div>
            <div class="user-box d-flex align-items-center justify-content-center">
                <i id="search-icon" class="bi bi-search h3 d-flex align-items-center justify-content-center"></i>
                <i id="user-icon" class="bi bi-person-square h3 d-flex align-items-center justify-content-center"></i>
                <i id="cart-icon" class="bi bi-cart h3 d-flex align-items-center justify-content-center"></i>
            </div>
        </nav>

        <div id="search-box" class="bg-light">
            <i id="close-search" class="bi bi-x-lg h3 d-flex align-items-center justify-content-center"></i>
           <input id="search-input" placeholder="Search"> 
           <i id="search-icon-search-box" class="bi bi-search h3 d-flex align-items-center justify-content-center"></i>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.7.0.js" integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>

        <script>
            const navbar = $(".navbar")[0];

            const logo_btn = $("#logo-btn")[0];
            const about_btn = $("#about-btn")[0];
            const shop_btn = $("#shop-btn")[0];
            const sale_btn = $("#sale-btn")[0];

            const open_search = $(".bi-search")[0];
            const user_btn = $(".bi-person-square")[0];
            const cart_btn = $(".bi-cart")[0];

            const search_box = $("#search-box")[0];
            const close_search = $("#close-search")[0];
            const search_input = $("#search-input")[0];
            const search_btn = $("#search-icon-search-box")[0];

            function mainPage() {
                window.location.href = "http://localhost:3000/";
            }

            function aboutPage() {
                //window.location.href = "https://localhost:3000/about_us/";
            }

            function shop() {
            }

            function sale() {
            }

            function closeSearch() {
                navbar.style.display = "flex";
                search_box.style.display = "none";
                search_input.value = ""; 
            }

            function openSearch() {
                navbar.style.display = "none";
                search_box.style.display = "flex";
                search_box.style.height = "0";
                search_box.style.justifyContent = "center";
                search_box.style.alignItems = "center";
                
                setTimeout(() => {
                    search_box.style.height = "8rem";
                }, 10)
            
                close_search.onclick = closeSearch;

                function search() {
                    let products_match = 0;

                    products.forEach(product => { 
                        let index = 0;
    
                        while(index < search_input.value.length && index < product.name.length) {
                            if(search_input.value[index] == product.name[index])
                                index++;
                            else
                                break;
                        }
    
                        if(index == search_input.value.length) {
                            products_match++; 
                        }
                        else {
                            product.display = "none";
                        }
                    })
    
                    if(products_match == 0){
                        //add some error to html
                    }
                }
                search_btn.onclick = search;
            }

            function user() {
                window.location.href = "http://localhost:3000/login/";
            }

            function cart() {
            }

            logo_btn.onclick = mainPage;
            about_btn.onclick = aboutPage;
            open_search.onclick = openSearch;
            user_btn.onclick = user;
            cart_btn.onclick = cart;
        </script>
    </body>
</html>